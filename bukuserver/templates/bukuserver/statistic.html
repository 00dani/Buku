{% extends "bukuserver/base.html" %}

{% block content %}
<div class="container">
  <h2 style="padding-top: 70px;">Statistic</h2>
  <h3>Most common Netloc</h3>
  <div class="col-md-6">
    <canvas id="mostCommonChart" width="500" height="500"></canvas>
  </div>
  <div class="col-md-6">
    <table class="table">
      <tr>
        <th>Rank</th>
        <th>Netloc</th>
        <th>Number</th>
      </tr>
      {% for netloc, number, _ in most_common_netlocs %}
      <tr>
        <td>{{loop.index}}</td>
        <td>{{netloc}}</td>
        <td>{{number}}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
<script>
var ctx = document.getElementById("mostCommonChart").getContext('2d');
var netlocChart = new Chart(ctx, {
  type: 'pie',
  data: {
    datasets: [{
      data: [
        {% for val in most_common_netlocs %} {{val.1}}, {% endfor %}
      ],
      backgroundColor: [
        {% for val in most_common_netlocs %} "{{val.2}}", {% endfor %}
      ],
    }],
    // These labels appear in the legend and in the tooltips when hovering different arcs
    labels: [
      {% for val in most_common_netlocs %} "{{val.0}}", {% endfor %}
    ]
  },
});

netlocChart.canvas.parentNode.style.height = '128px';

</script>

</div>
{% endblock %}

{% block head %}
{{super()}}
<script src="{{url_for('static', filename='bukuserver/js/Chart.min.js')}}"></script>
{% endblock %}
